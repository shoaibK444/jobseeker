<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Portal - Find Your Dream Job</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            min-height: 100vh;
        }

        /* Navigation */
        .navbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .navbar-brand {
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-decoration: none;
        }

        .navbar-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .navbar-links a {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .navbar-links a:hover {
            background: rgba(255,255,255,0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            color: white;
        }

        .user-info span {
            font-weight: 500;
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px;
        }

        /* Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Auth Forms */
        .auth-container {
            max-width: 450px;
            margin: 50px auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .auth-container h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }

        .auth-switch {
            text-align: center;
            margin-top: 20px;
            color: #666;
        }

        .auth-switch a {
            color: #667eea;
            text-decoration: none;
        }

        /* Dashboard */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
        }

        .card h3 {
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
        }

        .stat-card .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-card .stat-label {
            color: #666;
            margin-top: 5px;
        }

        /* Job List */
        .job-list {
            display: grid;
            gap: 20px;
        }

        .job-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s;
        }

        .job-card:hover {
            transform: translateY(-3px);
        }

        .job-card h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .job-card .company {
            color: #667eea;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .job-card .details {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .job-card .description {
            color: #555;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .job-card .tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .tag {
            background: #f0f0f0;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            color: #666;
        }

        .job-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        /* Profile Section */
        .profile-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
        }

        .profile-section h3 {
            margin-bottom: 25px;
            color: #333;
        }

        .skills-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .skill-tag {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .skill-tag .remove-skill {
            cursor: pointer;
            font-weight: bold;
        }

        /* Progress Bar */
        .progress-container {
            margin-top: 15px;
        }

        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            transition: width 0.3s;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 12px;
            color: #666;
        }

        /* Application Card */
        .application-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
            margin-bottom: 15px;
        }

        .application-card .job-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .application-card .company-name {
            color: #667eea;
            margin-bottom: 10px;
        }

        .application-card .status {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-interview {
            background: #cce5ff;
            color: #004085;
        }

        .status-accepted {
            background: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }

        /* Search and Filters */
        .search-section {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .search-section input,
        .search-section select {
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            min-width: 200px;
        }

        .search-section input:focus,
        .search-section select:focus {
            outline: none;
            border-color: #667eea;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-header h3 {
            color: #333;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .tab {
            padding: 10px 20px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 14px;
            color: #666;
            border-radius: 5px 5px 0 0;
            transition: all 0.3s;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .tab:hover:not(.active) {
            background: #f0f0f0;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #666;
        }

        .empty-state h4 {
            margin-bottom: 10px;
            color: #333;
        }

        /* File Upload */
        .file-upload {
            border: 2px dashed #ddd;
            padding: 30px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .file-upload:hover {
            border-color: #667eea;
        }

        .file-upload input {
            display: none;
        }

        .file-upload-icon {
            font-size: 40px;
            color: #ddd;
            margin-bottom: 10px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .navbar {
                flex-direction: column;
                gap: 15px;
            }

            .container {
                padding: 15px;
            }
        }

        /* Loading Spinner */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f0f0f0;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2000;
        }

        .toast {
            background: white;
            padding: 15px 20px;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideIn 0.3s ease;
        }

        .toast.success {
            border-left: 4px solid #28a745;
        }

        .toast.error {
            border-left: 4px solid #dc3545;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <a href="#" class="navbar-brand" onclick="showPage('home')">Job Portal</a>
        <div class="navbar-links" id="navLinks">
            <a href="index.html">Home</a>
            <a href="login.html">Login</a>
            <a href="signup.html">Sign Up</a>
        </div>
        <div class="user-info" id="userInfo" style="display: none;">
            <span id="userName"></span>
            <button class="btn btn-secondary btn-small" onclick="logout()">Logout</button>
        </div>
    </nav>

    <!-- Home Page -->
    <div class="page active" id="homePage">
        <div class="container">
            <div style="text-align: center; padding: 50px 0;">
                <h1 style="font-size: 48px; color: #333; margin-bottom: 20px;">Find Your Dream Job</h1>
                <p style="font-size: 18px; color: #666; margin-bottom: 30px;">Connect with top employers and discover exciting career opportunities</p>
                <button class="btn btn-primary" style="width: auto; padding: 15px 40px;" onclick="window.location.href='signup.html'">Get Started</button>
            </div>

            <!-- CEO Profile Section -->
            <div class="card" style="max-width: 800px; margin: 0 auto 40px;">
                <h3 style="text-align: center; margin-bottom: 25px; color: #667eea;">CEO Profile</h3>
                <div style="display: flex; gap: 30px; align-items: center; flex-wrap: wrap;">
                    <div style="flex: 0 0 200px;">
                        <div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                            <span style="font-size: 60px; color: white; font-weight: bold;">MS</span>
                        </div>
                    </div>
                    <div style="flex: 1;">
                        <h4 style="color: #333; margin-bottom: 10px; font-size: 24px;">Muhammad Shoaib</h4>
                        <p style="color: #667eea; font-weight: 500; margin-bottom: 15px;">Chief Executive Officer</p>
                        <p style="color: #666; line-height: 1.8; margin-bottom: 15px;">
                            Muhammad Shoaib is the visionary CEO of Job Portal, dedicated to connecting talented professionals with their dream careers.
                            With extensive experience in the recruitment industry, he leads our mission to transform how people find and secure meaningful employment.
                        </p>
                        <p style="color: #666; line-height: 1.8; margin-bottom: 15px;">
                            Under his leadership, Job Portal has become a trusted platform for thousands of job seekers and employers worldwide,
                            committed to excellence and innovation in the recruitment space.
                        </p>
                        <div style="display: flex; gap: 15px; margin-top: 20px;">
                            <span class="tag" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">Leadership</span>
                            <span class="tag" style="background: #f0f0f0;">Innovation</span>
                            <span class="tag" style="background: #f0f0f0;">Vision</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Leadership Team Section -->
            <div class="card" style="margin-bottom: 40px;">
                <h3 style="text-align: center; margin-bottom: 30px; color: #667eea;">Our Leadership Team</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 25px;">
                    <div style="text-align: center;">
                        <div style="width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); display: flex; align-items: center; justify-content: center; margin: 0 auto 15px;">
                            <span style="font-size: 36px; color: white; font-weight: bold;">RN</span>
                        </div>
                        <h4 style="color: #333; margin-bottom: 5px;">Rab Nawaz</h4>
                        <p style="color: #28a745; font-weight: 500; font-size: 14px;">HOD Accounts</p>
                    </div>
                    <div style="text-align: center;">
                        <div style="width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, #fd7e14 0%, #ffc107 100%); display: flex; align-items: center; justify-content: center; margin: 0 auto 15px;">
                            <span style="font-size: 36px; color: white; font-weight: bold;">IQ</span>
                        </div>
                        <h4 style="color: #333; margin-bottom: 5px;">Ismail Qurashi</h4>
                        <p style="color: #fd7e14; font-weight: 500; font-size: 14px;">HR</p>
                    </div>
                    <div style="text-align: center;">
                        <div style="width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, #007bff 0%, #6610f2 100%); display: flex; align-items: center; justify-content: center; margin: 0 auto 15px;">
                            <span style="font-size: 36px; color: white; font-weight: bold;">FR</span>
                        </div>
                        <h4 style="color: #333; margin-bottom: 5px;">Faiz Rasool</h4>
                        <p style="color: #007bff; font-weight: 500; font-size: 14px;">IT Head</p>
                    </div>
                    <div style="text-align: center;">
                        <div style="width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, #e83e8c 0%, #ff6b6b 100%); display: flex; align-items: center; justify-content: center; margin: 0 auto 15px;">
                            <span style="font-size: 36px; color: white; font-weight: bold;">TB</span>
                        </div>
                        <h4 style="color: #333; margin-bottom: 5px;">Tooba Batool</h4>
                        <p style="color: #e83e8c; font-weight: 500; font-size: 14px;">Designer Head</p>
                    </div>
                    <div style="text-align: center;">
                        <div style="width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, #20c997 0%, #28a745 100%); display: flex; align-items: center; justify-content: center; margin: 0 auto 15px;">
                            <span style="font-size: 36px; color: white; font-weight: bold;">FM</span>
                        </div>
                        <h4 style="color: #333; margin-bottom: 5px;">Fozia Malik</h4>
                        <p style="color: #20c997; font-weight: 500; font-size: 14px;">Marketing Head</p>
                    </div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">500+</div>
                    <div class="stat-label">Active Jobs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1000+</div>
                    <div class="stat-label">Companies</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">5000+</div>
                    <div class="stat-label">Candidates</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">100%</div>
                    <div class="stat-label">Free Service</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div class="page" id="loginPage">
        <div class="auth-container">
            <h2>Welcome Back</h2>
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginEmail">Email Address</label>
                    <input type="email" id="loginEmail" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required placeholder="Enter your password">
                </div>
                <button type="submit" class="btn btn-primary">Login</button>
            </form>
            <div class="auth-switch">
                Don't have an account? <a href="signup.html">Sign Up</a>
            </div>
        </div>
    </div>

    <!-- Signup Page -->
    <div class="page" id="signupPage">
        <div class="auth-container">
            <h2>Create Account</h2>
            <form id="signupForm" onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label for="signupName">Full Name</label>
                    <input type="text" id="signupName" required placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email Address</label>
                    <input type="email" id="signupEmail" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" required placeholder="Create a password" minlength="6">
                </div>
                <div class="form-group">
                    <label for="signupRole">Account Type</label>
                    <select id="signupRole" required>
                        <option value="employee">Job Seeker (Employee)</option>
                        <option value="employer">Employer</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Create Account</button>
            </form>
            <div class="auth-switch">
                Already have an account? <a href="login.html">Login</a>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div class="page" id="dashboardPage">
        <div class="container">
            <h2 style="color: #333; margin-bottom: 25px;">Dashboard</h2>

            <!-- Employee Dashboard -->
            <div id="employeeDashboard">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('employee', 'jobs')">Browse Jobs</button>
                    <button class="tab" onclick="switchTab('employee', 'profile')">My Profile</button>
                    <button class="tab" onclick="switchTab('employee', 'applications')">My Applications</button>
                    <button class="tab" onclick="switchTab('employee', 'progress')">My Progress</button>
                </div>

                <!-- Browse Jobs Tab -->
                <div id="employeeJobsTab" class="tab-content">
                    <div class="search-section">
                        <input type="text" id="jobSearch" placeholder="Search jobs..." oninput="searchJobs()">
                        <select id="jobCategoryFilter" onchange="searchJobs()">
                            <option value="">All Categories</option>
                            <option value="IT">IT & Technology</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Sales">Sales</option>
                            <option value="Finance">Finance</option>
                            <option value="HR">Human Resources</option>
                            <option value="Engineering">Engineering</option>
                            <option value="Design">Design</option>
                        </select>
                    </div>
                    <div class="job-list" id="jobList"></div>
                </div>

                <!-- Profile Tab -->
                <div id="employeeProfileTab" class="tab-content" style="display: none;">
                    <div class="profile-section">
                        <h3>Personal Details</h3>
                        <form id="profileForm" onsubmit="updateProfile(event)">
                            <div class="form-group">
                                <label for="profilePhone">Phone Number</label>
                                <input type="tel" id="profilePhone" placeholder="Enter phone number">
                            </div>
                            <div class="form-group">
                                <label for="profileAddress">Address</label>
                                <input type="text" id="profileAddress" placeholder="Enter address">
                            </div>
                            <div class="form-group">
                                <label for="profileJobTitle">Desired Job Title</label>
                                <input type="text" id="profileJobTitle" placeholder="e.g., Software Developer">
                            </div>
                            <div class="form-group">
                                <label for="profileSkills">Skills (comma separated)</label>
                                <input type="text" id="profileSkills" placeholder="e.g., JavaScript, React, Node.js">
                            </div>
                            <div class="form-group">
                                <label for="profileExperience">Work Experience</label>
                                <textarea id="profileExperience" placeholder="Describe your work experience..."></textarea>
                            </div>
                            <div class="form-group">
                                <label for="profileEducation">Education</label>
                                <textarea id="profileEducation" placeholder="Describe your education..."></textarea>
                            </div>
                            <div class="form-group">
                                <label for="profileBio">Bio</label>
                                <textarea id="profileBio" placeholder="Tell us about yourself..."></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: auto;">Save Profile</button>
                        </form>
                    </div>

                    <div class="profile-section" style="margin-top: 25px;">
                        <h3>Upload CV</h3>
                        <div class="file-upload" onclick="document.getElementById('cvInput').click()">
                            <div class="file-upload-icon">üìÑ</div>
                            <p>Click to upload your CV (PDF, DOC, DOCX)</p>
                            <p style="font-size: 12px; color: #999;">Maximum file size: 5MB</p>
                            <input type="file" id="cvInput" accept=".pdf,.doc,.docx" onchange="uploadCV(event)">
                        </div>
                        <div id="cvStatus" style="margin-top: 15px;"></div>
                    </div>
                </div>

                <!-- Applications Tab -->
                <div id="employeeApplicationsTab" class="tab-content" style="display: none;">
                    <div id="employeeApplicationsList"></div>
                </div>

                <!-- Progress Tab -->
                <div id="employeeProgressTab" class="tab-content" style="display: none;">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalApplications">0</div>
                            <div class="stat-label">Total Applications</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="pendingApps">0</div>
                            <div class="stat-label">Pending</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="inProgressApps">0</div>
                            <div class="stat-label">In Progress</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="acceptedApps">0</div>
                            <div class="stat-label">Accepted</div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Application Progress</h3>
                        <div id="progressList"></div>
                    </div>
                </div>
            </div>

            <!-- Employer Dashboard -->
            <div id="employerDashboard" style="display: none;">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('employer', 'myJobs')">My Jobs</button>
                    <button class="tab" onclick="switchTab('employer', 'postJob')">Post New Job</button>
                    <button class="tab" onclick="switchTab('employer', 'candidates')">Find Candidates</button>
                    <button class="tab" onclick="switchTab('employer', 'applications')">Applications</button>
                </div>

                <!-- My Jobs Tab -->
                <div id="employerMyJobsTab" class="tab-content">
                    <div class="job-list" id="employerJobList"></div>
                </div>

                <!-- Post Job Tab -->
                <div id="employerPostJobTab" class="tab-content" style="display: none;">
                    <div class="card">
                        <h3>Post a New Job</h3>
                        <form id="jobPostForm" onsubmit="postJob(event)">
                            <div class="form-group">
                                <label for="jobTitle">Job Title</label>
                                <input type="text" id="jobTitle" required placeholder="e.g., Software Developer">
                            </div>
                            <div class="form-group">
                                <label for="jobCategory">Category</label>
                                <select id="jobCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="IT">IT & Technology</option>
                                    <option value="Marketing">Marketing</option>
                                    <option value="Sales">Sales</option>
                                    <option value="Finance">Finance</option>
                                    <option value="HR">Human Resources</option>
                                    <option value="Engineering">Engineering</option>
                                    <option value="Design">Design</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="jobDescription">Job Description</label>
                                <textarea id="jobDescription" required placeholder="Describe the job role and responsibilities..."></textarea>
                            </div>
                            <div class="form-group">
                                <label for="jobRequirements">Requirements (comma separated)</label>
                                <input type="text" id="jobRequirements" placeholder="e.g., 2+ years experience, Bachelor's degree">
                            </div>
                            <div class="form-group">
                                <label for="jobLocation">Location</label>
                                <input type="text" id="jobLocation" required placeholder="e.g., New York, NY">
                            </div>
                            <div class="form-group">
                                <label for="jobSalary">Salary Range</label>
                                <input type="text" id="jobSalary" placeholder="e.g., $50,000 - $70,000">
                            </div>
                            <div class="form-group">
                                <label for="jobType">Job Type</label>
                                <select id="jobType" required>
                                    <option value="full-time">Full Time</option>
                                    <option value="part-time">Part Time</option>
                                    <option value="contract">Contract</option>
                                    <option value="internship">Internship</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: auto;">Post Job</button>
                        </form>
                    </div>
                </div>

                <!-- Find Candidates Tab -->
                <div id="employerCandidatesTab" class="tab-content" style="display: none;">
                    <div class="search-section">
                        <input type="text" id="candidateSearch" placeholder="Search by skills..." oninput="searchCandidates()">
                    </div>
                    <div id="candidatesList"></div>
                </div>

                <!-- Applications Tab -->
                <div id="employerApplicationsTab" class="tab-content" style="display: none;">
                    <div id="employerApplicationsList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Job Detail Modal -->
    <div class="modal" id="jobDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalJobTitle">Job Title</h3>
                <button class="modal-close" onclick="closeModal('jobDetailModal')">&times;</button>
            </div>
            <div id="modalJobContent"></div>
        </div>
    </div>

    <!-- Candidate Detail Modal -->
    <div class="modal" id="candidateDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Candidate Details</h3>
                <button class="modal-close" onclick="closeModal('candidateDetailModal')">&times;</button>
            </div>
            <div id="modalCandidateContent"></div>
        </div>
    </div>

    <!-- Onboarding Wizard Modal -->
    <div class="modal" id="onboardingModal" style="background: rgba(0,0,0,0.7);">
        <div class="modal-content" style="max-width: 700px;">
            <div id="onboardingContent">
                <!-- Onboarding content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Application Detail Modal -->
    <div class="modal" id="applicationDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Application Details</h3>
                <button class="modal-close" onclick="closeModal('applicationDetailModal')">&times;</button>
            </div>
            <div id="modalApplicationContent"></div>
        </div>
    </div>

    <script>
        // API Base URL
        const API_URL = '';

        // State
        let currentUser = null;
        let authToken = localStorage.getItem('authToken');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            if (authToken) {
                checkAuth();
            }
        });

        // Toast Notifications
        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = message;
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Page Navigation
        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            
            const pageIds = {
                'home': 'homePage',
                'login': 'loginPage',
                'signup': 'signupPage',
                'dashboard': 'dashboardPage'
            };
            
            document.getElementById(pageIds[pageName]).classList.add('active');
        }

        // Tab Navigation
        function switchTab(userType, tabName, event) {
            // Update tab buttons
            document.querySelectorAll(`#${userType}Dashboard .tab`).forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update tab content
            document.querySelectorAll(`#${userType}Dashboard .tab-content`).forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById(`${userType}${tabName.charAt(0).toUpperCase() + tabName.slice(1)}Tab`).style.display = 'block';

            // Load tab content
            if (userType === 'employee') {
                loadEmployeeTab(tabName);
            } else {
                loadEmployerTab(tabName);
            }
        }

        // Load employee tab content
        function loadEmployeeTab(tabName) {
            switch(tabName) {
                case 'jobs':
                    loadJobs();
                    break;
                case 'profile':
                    loadProfile();
                    break;
                case 'applications':
                    loadEmployeeApplications();
                    break;
                case 'progress':
                    loadProgress();
                    break;
            }
        }

        // Load employer tab content
        function loadEmployerTab(tabName) {
            switch(tabName) {
                case 'myJobs':
                    loadEmployerJobs();
                    break;
                case 'postJob':
                    // Form is ready
                    break;
                case 'candidates':
                    loadCandidates();
                    break;
                case 'applications':
                    loadEmployerApplications();
                    break;
            }
        }

        // Modal Functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Authentication
        async function checkAuth() {
            try {
                const response = await fetch(`${API_URL}/api/auth/me`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                
                if (response.ok) {
                    currentUser = await response.json();
                    updateUIForLoggedInUser();
                    showPage('dashboard');
                } else {
                    logout();
                }
            } catch (error) {
                console.error('Auth check failed:', error);
                logout();
            }
        }

        function updateUIForLoggedInUser() {
            document.getElementById('navLinks').style.display = 'none';
            document.getElementById('userInfo').style.display = 'flex';
            document.getElementById('userName').textContent = currentUser.name;

            if (currentUser.role === 'employee') {
                document.getElementById('employeeDashboard').style.display = 'block';
                document.getElementById('employerDashboard').style.display = 'none';
            } else {
                document.getElementById('employeeDashboard').style.display = 'none';
                document.getElementById('employerDashboard').style.display = 'block';
            }
        }

        async function handleSignup(event) {
            event.preventDefault();
            
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const role = document.getElementById('signupRole').value;

            try {
                const response = await fetch(`${API_URL}/api/auth/signup`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, email, password, role })
                });

                const data = await response.json();

                if (response.ok) {
                    authToken = data.token;
                    localStorage.setItem('authToken', authToken);
                    currentUser = data.user;
                    updateUIForLoggedInUser();
                    showPage('dashboard');
                    showToast('Account created successfully!');
                } else {
                    showToast(data.error, 'error');
                }
            } catch (error) {
                showToast('Error creating account: ' + error.message, 'error');
            }
        }

        async function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                const response = await fetch(`${API_URL}/api/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();

                if (response.ok) {
                    authToken = data.token;
                    localStorage.setItem('authToken', authToken);
                    currentUser = data.user;
                    updateUIForLoggedInUser();
                    showPage('dashboard');
                    showToast('Login successful!');
                    
                    // Check if onboarding is needed
                    if (currentUser.role === 'employee') {
                        setTimeout(() => checkOnboardingStatus(), 500);
                    }
                } else {
                    showToast(data.error, 'error');
                }
            } catch (error) {
                showToast('Error logging in: ' + error.message, 'error');
            }
        }

        function logout() {
            authToken = null;
            currentUser = null;
            localStorage.removeItem('authToken');
            document.getElementById('navLinks').style.display = 'flex';
            document.getElementById('userInfo').style.display = 'none';
            showPage('home');
            showToast('Logged out successfully');
        }

        // Job Functions
        async function loadJobs() {
            try {
                const response = await fetch(`${API_URL}/api/jobs?status=active`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const jobs = await response.json();
                displayJobs(jobs, 'jobList');
            } catch (error) {
                console.error('Error loading jobs:', error);
            }
        }

        async function searchJobs() {
            const search = document.getElementById('jobSearch').value;
            const category = document.getElementById('jobCategoryFilter').value;

            let url = `${API_URL}/api/jobs?status=active`;
            if (search) url += `&search=${encodeURIComponent(search)}`;
            if (category) url += `&category=${encodeURIComponent(category)}`;

            try {
                const response = await fetch(url, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const jobs = await response.json();
                displayJobs(jobs, 'jobList');
            } catch (error) {
                console.error('Error searching jobs:', error);
            }
        }

        function displayJobs(jobs, containerId) {
            const container = document.getElementById(containerId);
            
            if (jobs.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h4>No jobs found</h4>
                        <p>Try adjusting your search criteria</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = jobs.map(job => `
                <div class="job-card">
                    <h4>${job.title}</h4>
                    <div class="company">${job.employerName}</div>
                    <div class="details">
                        <span>üìç ${job.location}</span>
                        <span>üí∞ ${job.salary || 'Negotiable'}</span>
                        <span>üìã ${job.jobType}</span>
                    </div>
                    <div class="description">${job.description.substring(0, 200)}...</div>
                    <div class="tags">
                        ${job.category ? `<span class="tag">${job.category}</span>` : ''}
                        ${job.requirements.slice(0, 3).map(r => `<span class="tag">${r}</span>`).join('')}
                    </div>
                    <div class="job-actions">
                        <button class="btn btn-primary btn-small" onclick="viewJobDetail('${job.id}')">View Details</button>
                        ${currentUser.role === 'employee' ? 
                            `<button class="btn btn-success btn-small" onclick="applyForJob('${job.id}')">Apply Now</button>` : 
                            ''}
                    </div>
                </div>
            `).join('');
        }

        async function viewJobDetail(jobId) {
            try {
                const response = await fetch(`${API_URL}/api/jobs/${jobId}`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const job = await response.json();

                document.getElementById('modalJobTitle').textContent = job.title;
                document.getElementById('modalJobContent').innerHTML = `
                    <p><strong>Company:</strong> ${job.employerName}</p>
                    <p><strong>Location:</strong> ${job.location}</p>
                    <p><strong>Salary:</strong> ${job.salary || 'Negotiable'}</p>
                    <p><strong>Job Type:</strong> ${job.jobType}</p>
                    <p><strong>Category:</strong> ${job.category || 'Not specified'}</p>
                    <p><strong>Description:</strong></p>
                    <p>${job.description}</p>
                    <p><strong>Requirements:</strong></p>
                    <ul>
                        ${job.requirements.map(r => `<li>${r}</li>`).join('')}
                    </ul>
                    ${currentUser.role === 'employee' ? 
                        `<button class="btn btn-success" style="margin-top: 20px;" onclick="applyForJob('${job.id}'); closeModal('jobDetailModal');">Apply Now</button>` : 
                        ''}
                `;

                openModal('jobDetailModal');
            } catch (error) {
                showToast('Error loading job details', 'error');
            }
        }

        async function applyForJob(jobId) {
            try {
                const response = await fetch(`${API_URL}/api/jobs/${jobId}/apply`, {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });

                const data = await response.json();

                if (response.ok) {
                    showToast('Application submitted successfully!');
                    loadJobs();
                } else {
                    showToast(data.error, 'error');
                }
            } catch (error) {
                showToast('Error applying for job: ' + error.message, 'error');
            }
        }

        // Profile Functions
        async function loadProfile() {
            try {
                const response = await fetch(`${API_URL}/api/auth/me`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const user = await response.json();

                if (user.profile) {
                    document.getElementById('profilePhone').value = user.profile.phone || '';
                    document.getElementById('profileAddress').value = user.profile.address || '';
                    document.getElementById('profileJobTitle').value = user.profile.desiredJobTitle || '';
                    document.getElementById('profileSkills').value = user.profile.skills ? user.profile.skills.join(', ') : '';
                    document.getElementById('profileExperience').value = user.profile.experience || '';
                    document.getElementById('profileEducation').value = user.profile.education || '';
                    document.getElementById('profileBio').value = user.profile.bio || '';

                    if (user.profile.cv) {
                        document.getElementById('cvStatus').innerHTML = `
                            <p style="color: #28a745;">‚úì CV uploaded: <a href="${user.profile.cv}" target="_blank">View CV</a></p>
                        `;
                    }
                }
            } catch (error) {
                console.error('Error loading profile:', error);
            }
        }

        async function updateProfile(event) {
            event.preventDefault();

            const skills = document.getElementById('profileSkills').value;

            const profileData = {
                phone: document.getElementById('profilePhone').value,
                address: document.getElementById('profileAddress').value,
                desiredJobTitle: document.getElementById('profileJobTitle').value,
                skills: skills ? skills.split(',').map(s => s.trim()) : [],
                experience: document.getElementById('profileExperience').value,
                education: document.getElementById('profileEducation').value,
                bio: document.getElementById('profileBio').value
            };

            try {
                const response = await fetch(`${API_URL}/api/profile`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(profileData)
                });

                const data = await response.json();

                if (response.ok) {
                    showToast('Profile updated successfully!');
                } else {
                    showToast(data.error, 'error');
                }
            } catch (error) {
                showToast('Error updating profile: ' + error.message, 'error');
            }
        }

        async function uploadCV(event) {
            const file = event.target.files[0];
            if (!file) return;

            const formData = new FormData();
            formData.append('cv', file);

            try {
                const response = await fetch(`${API_URL}/api/profile/cv`, {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${authToken}` },
                    body: formData
                });

                const data = await response.json();

                if (response.ok) {
                    showToast('CV uploaded successfully!');
                    document.getElementById('cvStatus').innerHTML = `
                        <p style="color: #28a745;">‚úì CV uploaded: <a href="${data.cv}" target="_blank">View CV</a></p>
                    `;
                } else {
                    showToast(data.error, 'error');
                }
            } catch (error) {
                showToast('Error uploading CV: ' + error.message, 'error');
            }
        }

        // Application Functions
        async function loadEmployeeApplications() {
            try {
                const response = await fetch(`${API_URL}/api/applications`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const applications = await response.json();
                displayEmployeeApplications(applications);
            } catch (error) {
                console.error('Error loading applications:', error);
            }
        }

        function displayEmployeeApplications(applications) {
            const container = document.getElementById('employeeApplicationsList');

            if (applications.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h4>No applications yet</h4>
                        <p>Browse jobs and apply to get started</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = applications.map(app => `
                <div class="application-card">
                    <div class="job-title">${app.job?.title || 'Unknown Job'}</div>
                    <div class="company-name">${app.job?.employerName || 'Unknown Company'}</div>
                    <p style="color: #666; margin: 10px 0;">Applied on: ${new Date(app.appliedAt).toLocaleDateString()}</p>
                    <span class="status status-${app.status}">${app.status.charAt(0).toUpperCase() + app.status.slice(1)}</span>
                    
                    <div class="progress-container" style="margin-top: 15px;">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${app.progress}%"></div>
                        </div>
                        <div class="progress-text">
                            <span>Progress: ${app.progress}%</span>
                            <span>${app.progress < 30 ? 'Under Review' : app.progress < 70 ? 'In Progress' : 'Almost There!'}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Progress Functions
        async function loadProgress() {
            try {
                const response = await fetch(`${API_URL}/api/progress`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const progress = await response.json();

                document.getElementById('totalApplications').textContent = progress.totalApplications;
                document.getElementById('pendingApps').textContent = progress.pendingApplications;
                document.getElementById('inProgressApps').textContent = progress.inProgressApplications;
                document.getElementById('acceptedApps').textContent = progress.acceptedApplications;

                displayProgressList(progress.applications);
            } catch (error) {
                console.error('Error loading progress:', error);
            }
        }

        function displayProgressList(applications) {
            const container = document.getElementById('progressList');

            if (applications.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h4>No progress to show</h4>
                        <p>Apply for jobs to track your progress</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = applications.map(app => `
                <div class="application-card">
                    <div class="job-title">${app.job?.title || 'Unknown Job'}</div>
                    <span class="status status-${app.status}">${app.status.charAt(0).toUpperCase() + app.status.slice(1)}</span>
                    
                    <div class="progress-container" style="margin-top: 15px;">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${app.progress}%"></div>
                        </div>
                        <div class="progress-text">
                            <span>Progress: ${app.progress}%</span>
                            <span>${app.progress < 30 ? 'Under Review' : app.progress < 70 ? 'In Progress' : app.progress === 100 ? 'Complete!' : 'In Progress'}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Employer Functions
        async function postJob(event) {
            event.preventDefault();

            const jobData = {
                title: document.getElementById('jobTitle').value,
                category: document.getElementById('jobCategory').value,
                description: document.getElementById('jobDescription').value,
                requirements: document.getElementById('jobRequirements').value,
                location: document.getElementById('jobLocation').value,
                salary: document.getElementById('jobSalary').value,
                jobType: document.getElementById('jobType').value
            };

            try {
                const response = await fetch(`${API_URL}/api/jobs`, {
                    method: 'POST',
                    headers: { 
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(jobData)
                });

                const data = await response.json();

                if (response.ok) {
                    showToast('Job posted successfully!');
                    document.getElementById('jobPostForm').reset();
                    loadEmployerJobs();
                    switchTab('employer', 'myJobs');
                } else {
                    showToast(data.error, 'error');
                }
            } catch (error) {
                showToast('Error posting job: ' + error.message, 'error');
            }
        }

        async function loadEmployerJobs() {
            try {
                const response = await fetch(`${API_URL}/api/jobs`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const jobs = await response.json();
                displayEmployerJobs(jobs);
            } catch (error) {
                console.error('Error loading jobs:', error);
            }
        }

        function displayEmployerJobs(jobs) {
            const container = document.getElementById('employerJobList');

            if (jobs.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h4>No jobs posted yet</h4>
                        <p>Post your first job to start hiring</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = jobs.map(job => `
                <div class="job-card">
                    <h4>${job.title}</h4>
                    <div class="company">${job.employerName}</div>
                    <div class="details">
                        <span>üìç ${job.location}</span>
                        <span>üí∞ ${job.salary || 'Negotiable'}</span>
                        <span>üìã ${job.jobType}</span>
                        <span>${job.status === 'active' ? '‚úÖ Active' : '‚ùå Inactive'}</span>
                    </div>
                    <div class="description">${job.description.substring(0, 200)}...</div>
                    <div class="job-actions">
                        <button class="btn btn-secondary btn-small" onclick="viewJobDetail('${job.id}')">View</button>
                        <button class="btn btn-danger btn-small" onclick="deleteJob('${job.id}')">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        async function deleteJob(jobId) {
            if (!confirm('Are you sure you want to delete this job?')) return;

            try {
                const response = await fetch(`${API_URL}/api/jobs/${jobId}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });

                if (response.ok) {
                    showToast('Job deleted successfully!');
                    loadEmployerJobs();
                } else {
                    const data = await response.json();
                    showToast(data.error, 'error');
                }
            } catch (error) {
                showToast('Error deleting job: ' + error.message, 'error');
            }
        }

        async function loadCandidates() {
            try {
                const response = await fetch(`${API_URL}/api/employees`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const employees = await response.json();
                displayCandidates(employees);
            } catch (error) {
                console.error('Error loading candidates:', error);
            }
        }

        async function searchCandidates() {
            const skills = document.getElementById('candidateSearch').value;

            let url = `${API_URL}/api/employees`;
            if (skills) url += `?skills=${encodeURIComponent(skills)}`;

            try {
                const response = await fetch(url, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const employees = await response.json();
                displayCandidates(employees);
            } catch (error) {
                console.error('Error searching candidates:', error);
            }
        }

        function displayCandidates(employees) {
            const container = document.getElementById('candidatesList');

            if (employees.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h4>No candidates found</h4>
                        <p>Try adjusting your search criteria</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = employees.map(emp => `
                <div class="job-card">
                    <h4>${emp.name}</h4>
                    <div class="company">${emp.profile?.desiredJobTitle || 'Job Seeker'}</div>
                    <div class="details">
                        <span>üìß ${emp.email}</span>
                        <span>üìÑ ${emp.applicationCount || 0} applications</span>
                    </div>
                    ${emp.profile?.skills && emp.profile.skills.length > 0 ? `
                        <div class="tags">
                            ${emp.profile.skills.slice(0, 5).map(s => `<span class="tag">${s}</span>`).join('')}
                        </div>
                    ` : ''}
                    <div class="job-actions">
                        <button class="btn btn-primary btn-small" onclick="viewCandidateDetail('${emp.id}')">View Profile</button>
                    </div>
                </div>
            `).join('');
        }

        async function viewCandidateDetail(employeeId) {
            try {
                const response = await fetch(`${API_URL}/api/users/${employeeId}`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const user = await response.json();

                document.getElementById('modalCandidateContent').innerHTML = `
                    <h4 style="margin-bottom: 15px;">${user.name}</h4>
                    <p><strong>Email:</strong> ${user.email}</p>
                    ${user.profile ? `
                        <p><strong>Phone:</strong> ${user.profile.phone || 'Not provided'}</p>
                        <p><strong>Address:</strong> ${user.profile.address || 'Not provided'}</p>
                        <p><strong>Desired Job:</strong> ${user.profile.desiredJobTitle || 'Not specified'}</p>
                        <p><strong>Skills:</strong></p>
                        <div class="skills-container">
                            ${user.profile.skills && user.profile.skills.length > 0 ? 
                                user.profile.skills.map(s => `<span class="skill-tag">${s}</span>`).join('') : 
                                'No skills listed'}
                        </div>
                        <p style="margin-top: 15px;"><strong>Experience:</strong></p>
                        <p>${user.profile.experience || 'Not provided'}</p>
                        <p style="margin-top: 15px;"><strong>Education:</strong></p>
                        <p>${user.profile.education || 'Not provided'}</p>
                        <p style="margin-top: 15px;"><strong>Bio:</strong></p>
                        <p>${user.profile.bio || 'Not provided'}</p>
                        ${user.profile.cv ? `
                            <p style="margin-top: 15px;"><strong>CV:</strong> <a href="${user.profile.cv}" target="_blank">View CV</a></p>
                        ` : ''}
                    ` : '<p>Profile not completed yet</p>'}
                `;

                openModal('candidateDetailModal');
            } catch (error) {
                showToast('Error loading candidate details', 'error');
            }
        }

        async function loadEmployerApplications() {
            try {
                const response = await fetch(`${API_URL}/api/applications`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const applications = await response.json();
                displayEmployerApplications(applications);
            } catch (error) {
                console.error('Error loading applications:', error);
            }
        }

        function displayEmployerApplications(applications) {
            const container = document.getElementById('employerApplicationsList');

            if (applications.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h4>No applications yet</h4>
                        <p>Applications will appear here when candidates apply</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = applications.map(app => `
                <div class="application-card">
                    <div class="job-title">${app.job?.title || 'Unknown Job'}</div>
                    <div class="company-name">Candidate: ${app.employeeName}</div>
                    <p style="color: #666; margin: 10px 0;">Email: ${app.employeeEmail}</p>
                    <p style="color: #666; margin: 10px 0;">Applied on: ${new Date(app.appliedAt).toLocaleDateString()}</p>
                    
                    <div style="margin: 15px 0;">
                        <label>Status:</label>
                        <select onchange="updateApplicationStatus('${app.id}', this.value)" style="margin-left: 10px; padding: 5px;">
                            <option value="pending" ${app.status === 'pending' ? 'selected' : ''}>Pending</option>
                            <option value="screening" ${app.status === 'screening' ? 'selected' : ''}>Screening</option>
                            <option value="interview" ${app.status === 'interview' ? 'selected' : ''}>Interview</option>
                            <option value="accepted" ${app.status === 'accepted' ? 'selected' : ''}>Accepted</option>
                            <option value="rejected" ${app.status === 'rejected' ? 'selected' : ''}>Rejected</option>
                        </select>
                    </div>

                    <div class="progress-container" style="margin-top: 15px;">
                        <label>Progress: ${app.progress}%</label>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${app.progress}%"></div>
                        </div>
                        <input type="range" min="0" max="100" value="${app.progress}" 
                            onchange="updateApplicationProgress('${app.id}', this.value)" 
                            style="width: 100%; margin-top: 10px;">
                    </div>

                    <div class="job-actions" style="margin-top: 15px;">
                        <button class="btn btn-primary btn-small" onclick="viewCandidateProfile('${app.employeeId}')">View Profile</button>
                        ${app.employeeProfile?.cv ? `<a href="${app.employeeProfile.cv}" target="_blank" class="btn btn-secondary btn-small">View CV</a>` : ''}
                    </div>

                    ${app.notes ? `<p style="margin-top: 15px;"><strong>Notes:</strong> ${app.notes}</p>` : ''}
                    <textarea placeholder="Add notes..." style="width: 100%; margin-top: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px;" 
                        onchange="updateApplicationNotes('${app.id}', this.value)"></textarea>
                </div>
            `).join('');
        }

        async function updateApplicationStatus(applicationId, status) {
            try {
                const response = await fetch(`${API_URL}/api/applications/${applicationId}`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ status })
                });

                if (response.ok) {
                    showToast('Status updated!');
                    loadEmployerApplications();
                }
            } catch (error) {
                showToast('Error updating status', 'error');
            }
        }

        async function updateApplicationProgress(applicationId, progress) {
            try {
                const response = await fetch(`${API_URL}/api/applications/${applicationId}`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ progress: parseInt(progress) })
                });

                if (response.ok) {
                    showToast('Progress updated!');
                }
            } catch (error) {
                showToast('Error updating progress', 'error');
            }
        }

        async function updateApplicationNotes(applicationId, notes) {
            try {
                const response = await fetch(`${API_URL}/api/applications/${applicationId}`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ notes })
                });

                if (response.ok) {
                    showToast('Notes saved!');
                }
            } catch (error) {
                showToast('Error saving notes', 'error');
            }
        }

        async function viewCandidateProfile(employeeId) {
            await viewCandidateDetail(employeeId);
        }

        // ==================== ONBOARDING WIZARD ====================

        async function checkOnboardingStatus() {
            if (!currentUser || currentUser.role === 'employer') return;
            
            try {
                const response = await fetch(`${API_URL}/api/onboarding/status`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const status = await response.json();
                
                if (status.onboardingStep && status.onboardingStep !== 'complete') {
                    showOnboardingWizard(status);
                }
            } catch (error) {
                console.error('Error checking onboarding status:', error);
            }
        }

        function showOnboardingWizard(status) {
            const modal = document.getElementById('onboardingModal');
            modal.classList.add('active');
            
            const content = document.getElementById('onboardingContent');
            
            const steps = {
                'userType': renderUserTypeStep(status),
                'qualifications': renderQualificationsStep(status),
                'experience': renderExperienceStep(status),
                'skills': renderSkillsStep(status),
                'assessment': renderAssessmentIntroStep(status),
                'complete': renderCompleteStep(status)
            };
            
            content.innerHTML = steps[status.onboardingStep] || steps['userType'];
        }

        function renderUserTypeStep(status) {
            return `
                <div style="text-align: center;">
                    <h2 style="color: #667eea; margin-bottom: 10px;">Welcome to Job Portal!</h2>
                    <p style="color: #666; margin-bottom: 30px;">Let's set up your profile to help us find the perfect job for you.</p>
                    
                    <h3 style="margin-bottom: 20px;">What describes you best?</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px;">
                        <div onclick="selectUserType('employee')" 
                            style="padding: 30px 20px; border: 2px solid #ddd; border-radius: 10px; cursor: pointer; transition: all 0.3s;"
                            onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-5px)'"
                            onmouseout="this.style.borderColor='#ddd'; this.style.transform='translateY(0)'">
                            <div style="font-size: 48px; margin-bottom: 15px;">üíº</div>
                            <h4>Employee</h4>
                            <p style="font-size: 12px; color: #666;">Looking for a job</p>
                        </div>
                        
                        <div onclick="selectUserType('student')" 
                            style="padding: 30px 20px; border: 2px solid #ddd; border-radius: 10px; cursor: pointer; transition: all 0.3s;"
                            onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-5px)'"
                            onmouseout="this.style.borderColor='#ddd'; this.style.transform='translateY(0)'">
                            <div style="font-size: 48px; margin-bottom: 15px;">üìö</div>
                            <h4>Student</h4>
                            <p style="font-size: 12px; color: #666;">Still studying</p>
                        </div>
                        
                        <div onclick="selectUserType('freelancer')" 
                            style="padding: 30px 20px; border: 2px solid #ddd; border-radius: 10px; cursor: pointer; transition: all 0.3s;"
                            onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-5px)'"
                            onmouseout="this.style.borderColor='#ddd'; this.style.transform='translateY(0)'">
                            <div style="font-size: 48px; margin-bottom: 15px;">üöÄ</div>
                            <h4>Freelancer</h4>
                            <p style="font-size: 12px; color: #666;">Working independently</p>
                        </div>
                    </div>
                </div>
            `;
        }

        async function selectUserType(userType) {
            try {
                const response = await fetch(`${API_URL}/api/onboarding/user-type`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ userType })
                });
                
                const status = await response.json();
                document.getElementById('onboardingContent').innerHTML = renderQualificationsStep(status);
            } catch (error) {
                showToast('Error saving user type', 'error');
            }
        }

        function renderQualificationsStep(status) {
            return `
                <div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h3>Step 2 of 5: Your Qualifications</h3>
                        <div style="display: flex; gap: 8px;">
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #ddd;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #ddd;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #ddd;"></span>
                        </div>
                    </div>
                    
                    <form onsubmit="saveQualifications(event)">
                        <div class="form-group">
                            <label>Highest Education Level</label>
                            <select id="highestEducation" required>
                                <option value="">Select...</option>
                                <option value="high_school">High School</option>
                                <option value="diploma">Diploma</option>
                                <option value="bachelors">Bachelor's Degree</option>
                                <option value="masters">Master's Degree</option>
                                <option value="phd">PhD</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Field of Study</label>
                            <select id="fieldOfStudy" required>
                                <option value="">Select...</option>
                                <option value="IT">IT & Computer Science</option>
                                <option value="Engineering">Engineering</option>
                                <option value="Business">Business Administration</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Finance">Finance</option>
                                <option value="Design">Design</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Institution Name</label>
                            <input type="text" id="institution" placeholder="Enter institution name" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Graduation Year</label>
                            <input type="number" id="graduationYear" placeholder="YYYY" min="1950" max="2030" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Certifications (comma separated, if any)</label>
                            <input type="text" id="certifications" placeholder="e.g., AWS Certified, PMP">
                        </div>
                        
                        <div style="display: flex; gap: 15px; margin-top: 20px;">
                            <button type="button" class="btn btn-secondary" onclick="skipStep('qualifications')">Skip for now</button>
                            <button type="submit" class="btn btn-primary">Next: Experience ‚Üí</button>
                        </div>
                    </form>
                </div>
            `;
        }

        async function saveQualifications(event) {
            event.preventDefault();
            
            const data = {
                highestEducation: document.getElementById('highestEducation').value,
                fieldOfStudy: document.getElementById('fieldOfStudy').value,
                institution: document.getElementById('institution').value,
                graduationYear: parseInt(document.getElementById('graduationYear').value),
                certifications: document.getElementById('certifications').value.split(',').map(s => s.trim()).filter(s => s)
            };
            
            try {
                const response = await fetch(`${API_URL}/api/onboarding/qualifications`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                const status = await response.json();
                document.getElementById('onboardingContent').innerHTML = renderExperienceStep(status);
            } catch (error) {
                showToast('Error saving qualifications', 'error');
            }
        }

        function renderExperienceStep(status) {
            return `
                <div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h3>Step 3 of 5: Your Experience</h3>
                        <div style="display: flex; gap: 8px;">
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #ddd;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #ddd;"></span>
                        </div>
                    </div>
                    
                    <form onsubmit="saveExperience(event)">
                        <div class="form-group">
                            <label>Do you have work experience?</label>
                            <select id="hasExperience" onchange="toggleExperienceFields()" required>
                                <option value="">Select...</option>
                                <option value="true">Yes, I have experience</option>
                                <option value="false">No, I'm a fresher</option>
                            </select>
                        </div>
                        
                        <div id="experienceFields" style="display: none;">
                            <div class="form-group">
                                <label>Experience Level</label>
                                <select id="experienceLevel">
                                    <option value="">Select...</option>
                                    <option value="entry">Entry Level (0-2 years)</option>
                                    <option value="mid">Mid Level (3-5 years)</option>
                                    <option value="senior">Senior Level (5-10 years)</option>
                                    <option value="executive">Executive (10+ years)</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Current Job Title</label>
                                <input type="text" id="currentJobTitle" placeholder="e.g., Software Developer">
                            </div>
                            
                            <div class="form-group">
                                <label>Current Company</label>
                                <input type="text" id="currentCompany" placeholder="Company name">
                            </div>
                            
                            <div class="form-group">
                                <label>Years of Experience</label>
                                <input type="number" id="yearsOfExperience" placeholder="0" min="0" max="50">
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 15px; margin-top: 20px;">
                            <button type="button" class="btn btn-secondary" onclick="skipStep('experience')">Skip for now</button>
                            <button type="submit" class="btn btn-primary">Next: Skills ‚Üí</button>
                        </div>
                    </form>
                </div>
            `;
        }

        function toggleExperienceFields() {
            const hasExperience = document.getElementById('hasExperience').value === 'true';
            document.getElementById('experienceFields').style.display = hasExperience ? 'block' : 'none';
            
            if (hasExperience) {
                document.getElementById('experienceLevel').required = true;
            } else {
                document.getElementById('experienceLevel').required = false;
            }
        }

        async function saveExperience(event) {
            event.preventDefault();
            
            const hasExperience = document.getElementById('hasExperience').value === 'true';
            
            const data = {
                hasExperience,
                experienceLevel: document.getElementById('experienceLevel').value,
                currentJobTitle: document.getElementById('currentJobTitle').value,
                currentCompany: document.getElementById('currentCompany').value,
                yearsOfExperience: parseInt(document.getElementById('yearsOfExperience').value) || 0
            };
            
            try {
                const response = await fetch(`${API_URL}/api/onboarding/experience`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                const status = await response.json();
                document.getElementById('onboardingContent').innerHTML = renderSkillsStep(status);
            } catch (error) {
                showToast('Error saving experience', 'error');
            }
        }

        function renderSkillsStep(status) {
            return `
                <div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h3>Step 4 of 5: Your Skills</h3>
                        <div style="display: flex; gap: 8px;">
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #ddd;"></span>
                        </div>
                    </div>
                    
                    <form onsubmit="saveSkills(event)">
                        <div class="form-group">
                            <label>What field are you interested in?</label>
                            <select id="interestedField" required onchange="updateSkillOptions()">
                                <option value="">Select...</option>
                                <option value="IT">IT & Technology</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Sales">Sales</option>
                                <option value="Finance">Finance</option>
                                <option value="HR">Human Resources</option>
                                <option value="Engineering">Engineering</option>
                                <option value="Design">Design</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Your Skills (comma separated)</label>
                            <input type="text" id="skillsInput" placeholder="e.g., JavaScript, Python, React, Communication" required>
                            <p style="font-size: 12px; color: #999; margin-top: 5px;">List your key skills separated by commas</p>
                        </div>
                        
                        <div class="form-group">
                            <label>Self-assessed Skill Level</label>
                            <select id="skillLevel" required>
                                <option value="">Select...</option>
                                <option value="beginner">Beginner - Just starting</option>
                                <option value="intermediate">Intermediate - Some experience</option>
                                <option value="advanced">Advanced - Proficient</option>
                                <option value="expert">Expert - Master level</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; gap: 15px; margin-top: 20px;">
                            <button type="button" class="btn btn-secondary" onclick="skipStep('skills')">Skip for now</button>
                            <button type="submit" class="btn btn-primary">Next: Take Assessment ‚Üí</button>
                        </div>
                    </form>
                </div>
            `;
        }

        async function saveSkills(event) {
            event.preventDefault();
            
            const skills = document.getElementById('skillsInput').value.split(',').map(s => s.trim()).filter(s => s);
            
            const data = {
                skills,
                skillLevel: document.getElementById('skillLevel').value,
                interestedFields: [document.getElementById('interestedField').value]
            };
            
            try {
                const response = await fetch(`${API_URL}/api/onboarding/skills`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                await loadAssessmentQuestions();
            } catch (error) {
                showToast('Error saving skills', 'error');
            }
        }

        async function loadAssessmentQuestions() {
            try {
                const response = await fetch(`${API_URL}/api/assessment/questions`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const data = await response.json();
                renderAssessmentStep(data);
            } catch (error) {
                showToast('Error loading assessment questions', 'error');
            }
        }

        function renderAssessmentStep(data) {
            const { field, questions, totalQuestions } = data;
            
            let questionsHTML = questions.map((q, index) => `
                <div class="question-card" id="question-${index}" style="margin-bottom: 25px; padding: 20px; background: #f9f9f9; border-radius: 10px;">
                    <p style="font-weight: 500; margin-bottom: 15px;"><strong>Q${index + 1}.</strong> ${q.question}</p>
                    <div class="options">
                        ${q.options.map((opt, optIndex) => `
                            <label style="display: block; padding: 10px 15px; margin-bottom: 8px; background: white; border-radius: 5px; cursor: pointer; border: 1px solid #ddd;" 
                                onmouseover="this.style.borderColor='#667eea'"
                                onmouseout="this.style.borderColor='#ddd'">
                                <input type="radio" name="question-${index}" value="${optIndex}" style="margin-right: 10px;">
                                ${opt}
                            </label>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            
            document.getElementById('onboardingContent').innerHTML = `
                <div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h3>Step 5 of 5: Skills Assessment</h3>
                        <div style="display: flex; gap: 8px;">
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                            <span style="width: 10px; height: 10px; border-radius: 50%; background: #667eea;"></span>
                        </div>
                    </div>
                    
                    <p style="color: #666; margin-bottom: 20px;">
                        <strong>Field:</strong> ${field} | <strong>Questions:</strong> ${totalQuestions}
                    </p>
                    <p style="color: #666; margin-bottom: 25px; font-size: 14px;">
                        Answer these questions to assess your ${field} knowledge. Your results will help us match you with suitable jobs.
                    </p>
                    
                    <form onsubmit="submitAssessment(event)">
                        <input type="hidden" id="assessmentField" value="${field}">
                        ${questionsHTML}
                        
                        <div style="display: flex; gap: 15px; margin-top: 30px;">
                            <button type="button" class="btn btn-secondary" onclick="skipAssessment()">Skip for now</button>
                            <button type="submit" class="btn btn-primary">Submit Assessment</button>
                        </div>
                    </form>
                </div>
            `;
        }

        async function submitAssessment(event) {
            event.preventDefault();
            
            const field = document.getElementById('assessmentField').value;
            const answers = [];
            
            // Collect all answers
            const questionCards = document.querySelectorAll('[id^="question-"]');
            questionCards.forEach((card, index) => {
                const selectedOption = card.querySelector(`input[name="question-${index}"]:checked`);
                answers.push(selectedOption ? parseInt(selectedOption.value) : 0);
            });
            
            try {
                const response = await fetch(`${API_URL}/api/assessment/submit`, {
                    method: 'POST',
                    headers: { 
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ answers, field })
                });
                
                const result = await response.json();
                renderCompleteStep(result);
            } catch (error) {
                showToast('Error submitting assessment', 'error');
            }
        }

        function renderCompleteStep(result) {
            let message = '';
            let emoji = '';
            
            if (result.skillLevel === 'Expert') {
                message = 'Outstanding! You have excellent skills!';
                emoji = 'üèÜ';
            } else if (result.skillLevel === 'Advanced') {
                message = 'Great job! You have strong skills!';
                emoji = 'üåü';
            } else if (result.skillLevel === 'Intermediate') {
                message = 'Good effort! Keep improving!';
                emoji = 'üëç';
            } else {
                message = 'Keep learning! Practice makes perfect!';
                emoji = 'üìö';
            }
            
            document.getElementById('onboardingContent').innerHTML = `
                <div style="text-align: center; padding: 30px 0;">
                    <div style="font-size: 80px; margin-bottom: 20px;">${emoji}</div>
                    <h2 style="color: #667eea; margin-bottom: 15px;">Profile Complete!</h2>
                    <p style="color: #666; margin-bottom: 25px;">${message}</p>
                    
                    <div style="background: #f9f9f9; padding: 25px; border-radius: 10px; margin-bottom: 25px;">
                        <h4 style="margin-bottom: 15px;">Your Results</h4>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                            <div>
                                <p style="color: #999; font-size: 12px;">SCORE</p>
                                <p style="font-size: 36px; font-weight: bold; color: #667eea;">${result.score}%</p>
                            </div>
                            <div>
                                <p style="color: #999; font-size: 12px;">SKILL LEVEL</p>
                                <p style="font-size: 24px; font-weight: bold; color: #28a745;">${result.skillLevel}</p>
                            </div>
                            <div>
                                <p style="color: #999; font-size: 12px;">CORRECT ANSWERS</p>
                                <p style="font-size: 24px; font-weight: bold; color: #333;">${result.correctAnswers}/${result.totalQuestions}</p>
                            </div>
                            <div>
                                <p style="color: #999; font-size: 12px;">QUESTIONS</p>
                                <p style="font-size: 24px; font-weight: bold; color: #333;">${result.totalQuestions}</p>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" style="width: auto; padding: 15px 40px;" onclick="closeOnboarding()">Go to Dashboard ‚Üí</button>
                </div>
            `;
        }

        function skipStep(step) {
            const skipData = {};
            
            if (step === 'qualifications') {
                skipData = { highestEducation: 'not_specified', fieldOfStudy: 'Not Specified', institution: '', graduationYear: null, certifications: [] };
            } else if (step === 'experience') {
                skipData = { hasExperience: false, experienceLevel: '', currentJobTitle: '', currentCompany: '', yearsOfExperience: 0 };
            } else if (step === 'skills') {
                skipData = { skills: [], skillLevel: 'beginner', interestedFields: ['IT'] };
            }
            
            fetch(`/api/onboarding/${step}`, {
                method: 'PUT',
                headers: { 
                    'Authorization': `Bearer ${authToken}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(skipData)
            }).then(async (response) => {
                const status = await response.json();
                
                if (status.onboardingStep === 'complete') {
                    renderCompleteStep({ score: 0, skillLevel: 'Not Assessed', correctAnswers: 0, totalQuestions: 0 });
                } else if (step === 'qualifications') {
                    document.getElementById('onboardingContent').innerHTML = renderExperienceStep(status);
                } else if (step === 'experience') {
                    document.getElementById('onboardingContent').innerHTML = renderSkillsStep(status);
                } else if (step === 'skills') {
                    await loadAssessmentQuestions();
                }
            });
        }

        function skipAssessment() {
            fetch(`${API_URL}/api/assessment/submit`, {
                method: 'POST',
                headers: { 
                    'Authorization': `Bearer ${authToken}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ answers: [], field: 'IT' })
            }).then(async (response) => {
                const result = await response.json();
                result.skillLevel = 'Not Assessed';
                renderCompleteStep(result);
            });
        }

        function closeOnboarding() {
            document.getElementById('onboardingModal').classList.remove('active');
            if (currentUser.role === 'employee') {
                loadJobs();
            }
        }
    </script>
</body>
</html>
